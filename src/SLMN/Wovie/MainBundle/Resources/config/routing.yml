# Public
slmn_wovie_public_requestNewPassword:
    path:   /recover
    defaults: { _controller: SLMNWovieMainBundle:Public:requestNewPassword }
    methods:  [GET, POST]

slmn_wovie_public_redeemNewPassword:
    path:   /recover/{token}
    defaults: { _controller: SLMNWovieMainBundle:Public:redeemNewPassword }
    methods:  [GET, POST]
    requirements:
        token: "^[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890]{50}+$"

# User
slmn_wovie_user_dashboard:
    pattern:  /
    defaults: { _controller: SLMNWovieMainBundle:User:dashboard }
    methods:  [GET]
slmn_wovie_user_movie_shelf:
    pattern:  /shelf/
    defaults: { _controller: SLMNWovieMainBundle:User:shelf }
    methods:  [GET]
slmn_wovie_user_movie_add:
    pattern:  /add/
    defaults: { _controller: SLMNWovieMainBundle:User:addMovie }
    methods:  [GET, POST]
slmn_wovie_user_movie_details:
    pattern:  /{id}/
    defaults: { _controller: SLMNWovieMainBundle:User:dashboard }
    methods:  [GET]
    requirements:
        id: \d+
slmn_wovie_user_search:
    pattern:  /search
    defaults: { _controller: SLMNWovieMainBundle:User:search }
    methods:  [GET]

# Actions
slmn_wovie_action_ajax_search_external:
    pattern: /action/ajax/search-external.html
    defaults: { _controller: SLMNWovieMainBundle:Action:searchExternal }
    methods: [GET]
    options:
        expose: true
    # TODO: requirements: â€¦
slmn_wovie_actions_ajax_fetch_description:
    pattern: /action/ajax/fetch-description.html
    defaults: { _controller: SLMNWovieMainBundle:Action:fetchDescription }
    methods: [GET]
    options:
      expose: true
slmn_wovie_actions_ajax_watchedit:
    pattern: /action/ajax/watchedit.json
    defaults: { _controller: SLMNWovieMainBundle:Action:watchedIt }
    methods: [POST]
    options:
      expose: true
    requirements:
        id: \d+

# Frames
slmn_wovie_action_frames_choose_episode:
    pattern: /frame/choose-episode/{id}/
    defaults: { _controller: SLMNWovieMainBundle:Frame:chooseEpisode }
    methods: [GET]

# Image
slmn_wovie_image_coverImage:
    pattern: /image/public/cover/{freebaseId}.jpg
    host: "{cdn}"
    defaults: { _controller: SLMNWovieMainBundle:Image:coverImage, cdn: "%slmn_wovie_mainbundle.cdn%" }
    methods: [GET]
    requirements:
        cdn: "%slmn_wovie_mainbundle.cdn%|%slmn_wovie_mainbundle.domain%"
        freebaseId: "^.+$" #TODO: Regex for freebase id ( /m/xxx 04csmqp eg )

# System
login:
    path:   /login
    defaults:  { _controller: SLMNWovieMainBundle:User:login }
    methods:  [GET]
login_check:
    path:   /login_check
    methods:  [POST]
logout:
    path:   /logout
    methods:  [GET]